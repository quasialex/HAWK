<a class="back" href="/">← Home</a>
<h2><%= @mod.label %></h2>
<p class="muted"><%= @mod.id %> — <%= @mod.category %></p>

<section>
  <% (@actions || @mod.actions).each do |a| %>
    <form class="form" method="post" action="/run/<%= @mod.id %>/<%= a[:id] %>">
      <h3><%= a[:label] %></h3>
      <p class="desc"><%= a[:description] %></p>
      <div class="inputs">
        <% a[:inputs].each do |i| %>
          <label>
            <span><%= i[:label] %></span>
            <% if i[:type] == 'select' %>
              <select name="<%= i[:name] %>">
                <% (i[:options] || []).each do |opt| %>
                  <option value="<%= opt %>" <%= 'selected' if i[:default].to_s == opt.to_s %>><%= opt %></option>
                <% end %>
              </select>
            <% else %>
              <input type="<%= i[:type] || 'text' %>" name="<%= i[:name] %>" placeholder="<%= i[:placeholder] %>" value="<%= i[:default] %>" />
            <% end %>
          </label>
        <% end %>
      </div>
      <button type="submit">Run</button>
    </form>
  <% end %>
</section>
